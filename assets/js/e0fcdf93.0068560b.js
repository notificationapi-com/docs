(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[203],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var r=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var s=r.createContext({}),u=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},c=function(e){var t=u(e.components);return r.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},p=r.forwardRef((function(e,t){var n=e.components,i=e.mdxType,a=e.originalType,s=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=u(n),m=i,h=p["".concat(s,".").concat(m)]||p[m]||d[m]||a;return n?r.createElement(h,l(l({ref:t},c),{},{components:n})):r.createElement(h,l({ref:t},c))}));function m(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var a=n.length,l=new Array(a);l[0]=p;var o={};for(var s in t)hasOwnProperty.call(t,s)&&(o[s]=t[s]);o.originalType=e,o.mdxType="string"==typeof e?e:i,l[1]=o;for(var u=2;u<a;u++)l[u]=n[u];return r.createElement.apply(null,l)}return r.createElement.apply(null,n)}p.displayName="MDXCreateElement"},3031:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return p},frontMatter:function(){return s},metadata:function(){return u},toc:function(){return c}});var r=n(2122),i=n(9756),a=(n(7294),n(3905)),l=n.p+"assets/images/Logs-0eb9be27dc39b249ac129ca25a4cb2a5.png",o=["components"],s={sidebar_position:5},u={unversionedId:"guides/logs",id:"guides/logs",isDocsHomePage:!1,title:"Logs",description:"After receiving your request to send a notification, we start tracking the progress of the notification and show that in our Logs dashboard.",source:"@site/docs/guides/logs.md",sourceDirName:"guides",slug:"/guides/logs",permalink:"/guides/logs",editUrl:"https://github.com/notificationapi-com/docs/edit/main/docs/guides/logs.md",version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Update Sender Address",permalink:"/guides/update-sender-address"},next:{title:"Unsubscribe Link",permalink:"/guides/unsubscribe-link"}},c=[{value:"Notification States",id:"notification-states",children:[]},{value:"Tracked Events",id:"tracked-events",children:[]},{value:"Custom Queries",id:"custom-queries",children:[{value:"Query Structure",id:"query-structure",children:[]},{value:"AND/OR Queries",id:"andor-queries",children:[]}]},{value:"FAQ",id:"faq",children:[]}],d={toc:c};function p(e){var t=e.components,n=(0,i.Z)(e,o);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"After receiving your request to send a notification, we start tracking the progress of the notification and show that in our Logs dashboard."),(0,a.kt)("p",null,"This is specifically useful for ensuring new notifications are working correctly and for customer support staff to handle tickets related to notifications."),(0,a.kt)("img",{src:l}),(0,a.kt)("h2",{id:"notification-states"},"Notification States"),(0,a.kt)("p",null,"Each ",(0,a.kt)("inlineCode",{parentName:"p"},"send()")," request creates a record in the logs table with either of the following statuses:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"success"),": we have successfully delivered everything to the expected channels"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"failure"),": something has gone wrong or not delivered (see events below)"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"received"),": notification is in this state until it enters ",(0,a.kt)("inlineCode",{parentName:"li"},"success")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"failure"))),(0,a.kt)("h2",{id:"tracked-events"},"Tracked Events"),(0,a.kt)("p",null,"When you click on a notification in the log table, you will see the following events:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Received: Our servers received your request and have begun processing it."),(0,a.kt)("li",{parentName:"ul"},"Ignored: The request was ignored due to an expected condition such as dashboard preferences, user preferences or plan limits."),(0,a.kt)("li",{parentName:"ul"},"Sending: We have validated your request and are going to send it."),(0,a.kt)("li",{parentName:"ul"},"Sent: We have successfully sent the notification to responsible 3rd-parties such email servers or mobile networks."),(0,a.kt)("li",{parentName:"ul"},"Delivered: The notification was successfully delivered to the user."),(0,a.kt)("li",{parentName:"ul"},"Failed: Something went wrong unexpectedly during processing or delivery. E.g. Bad parameters, email bounces.")),(0,a.kt)("p",null,"Email Specific Sub-Events:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Failed - Bounce: The recipient's mail server permanently rejected the email"),(0,a.kt)("li",{parentName:"ul"},"Failed - Delivery Delay: The email couldn't be delivered to the recipient\u2019s mail server because a temporary issue occurred. Delivery delays can occur, for example, when the recipient's inbox is full, or when the receiving email server experiences a transient issue.")),(0,a.kt)("p",null,"SMS Specific Sub-Events:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Failed - Undelivered: We have received a delivery receipt indicating that the message was not delivered. This can happen for a number of reasons, including carrier content filtering, availability of the destination handset, etc."),(0,a.kt)("li",{parentName:"ul"},"Failed - Infrastructure: The message could not be sent due to problems with the underlying telecom service.")),(0,a.kt)("p",null,"Call Specific Sub-Events:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Delivered - Completed: The call was made, answered and disconnected."),(0,a.kt)("li",{parentName:"ul"},"Delivered - Busy: NotificationAPI dialled the number, but received a busy response."),(0,a.kt)("li",{parentName:"ul"},"Delivered - No Answer: NotificationAPI dialled the number, but no one answered after 30 seconds."),(0,a.kt)("li",{parentName:"ul"},"Failed - Cannot Reach: We could not connect the call. Possible causes include the destination being unreachable or the number may have been input incorrectly.")),(0,a.kt)("h2",{id:"custom-queries"},"Custom Queries"),(0,a.kt)("p",null,"Besides the predefined filters on the logs table, you can use any custom queries to dig deep. For example: ",(0,a.kt)("inlineCode",{parentName:"p"},'$.request.mergeTags.firstName="Jane"')),(0,a.kt)("p",null,"You can search for anything in the ",(0,a.kt)("inlineCode",{parentName:"p"},"$.request"),", which contains the ",(0,a.kt)("a",{parentName:"p",href:"/reference/server#send"},"original parameters you passed to send()"),". Here's an example of a ",(0,a.kt)("inlineCode",{parentName:"p"},"$.request")," object:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:'title="$.request"',title:'"$.request"'},"{\n    notificationId: '...',\n    user: {\n        id: '123',\n        email: 'jane@doe.com',\n        number: '+19999999999'\n    },\n    mergeTags: {\n        firstName: 'jane'\n    }\n}\n")),(0,a.kt)("h3",{id:"query-structure"},"Query Structure"),(0,a.kt)("h5",{id:"query-format"},"Query Format"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Property Operator MatchedPattern")),(0,a.kt)("h5",{id:"property-examples"},"Property Examples:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"$.trackingId")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"$.request.notificationId")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"$.request.user.number")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"$.request.mergeTags.firstName")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"$.request.mergeTags.products[0].sku.title"))),(0,a.kt)("h5",{id:"operators"},"Operators:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"String Operators: ",(0,a.kt)("inlineCode",{parentName:"li"},"="),", ",(0,a.kt)("inlineCode",{parentName:"li"},"!=")),(0,a.kt)("li",{parentName:"ul"},"Numeric Operators: ",(0,a.kt)("inlineCode",{parentName:"li"},"=")," ",(0,a.kt)("inlineCode",{parentName:"li"},"!=")," ",(0,a.kt)("inlineCode",{parentName:"li"},">")," ",(0,a.kt)("inlineCode",{parentName:"li"},">=")," ",(0,a.kt)("inlineCode",{parentName:"li"},"<")," ",(0,a.kt)("inlineCode",{parentName:"li"},"<=")),(0,a.kt)("li",{parentName:"ul"},"Logical Operators:",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"IS"),", can only be used with ",(0,a.kt)("inlineCode",{parentName:"li"},"NULL"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"FALSE")," or ",(0,a.kt)("inlineCode",{parentName:"li"},"TRUE")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NOT EXISTS"),", e.g. ",(0,a.kt)("inlineCode",{parentName:"li"},"$.request.user.number NOT EXISTS"))))),(0,a.kt)("h5",{id:"matchedpattern"},"MatchedPattern:"),(0,a.kt)("p",null,"A string or number. You can use ",(0,a.kt)("inlineCode",{parentName:"p"},"*")," as a wildcard for string matching. Example: ",(0,a.kt)("inlineCode",{parentName:"p"},'$.request.user.email="*@gmail.com"')),(0,a.kt)("h3",{id:"andor-queries"},"AND/OR Queries"),(0,a.kt)("p",null,"You can use ",(0,a.kt)("inlineCode",{parentName:"p"},"&&"),", ",(0,a.kt)("inlineCode",{parentName:"p"},"||")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"()")," to combine multiple queries. Examples:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"($.request.notificationId='new-user' && $.request.user.number='+19999999999') ||\n    $.request.mergeTags.firstName=\"Jane\"\n")),(0,a.kt)("h2",{id:"faq"},"FAQ"),(0,a.kt)("b",null,"1. Do the logs display the final delivered notifications?"),(0,a.kt)("p",null,"Yes. The logs display exactly what the user receives, except for the minor differences due to browsers and environments."),(0,a.kt)("b",null,"2. Does using logs require technical knowledge?"),(0,a.kt)("p",null,"No. Anyone on your team can use it to debug issues. This is especially useful for customer support teams."),(0,a.kt)("b",null,"3. Does Logs provide a rest API? Can we read the logs through the SDK?"),(0,a.kt)("p",null,"There are undocumented APIs to access logs. Please contact support to learn more."),(0,a.kt)("b",null,"4. Are the logs real-time?"),(0,a.kt)("p",null,"There could be up to 15 minutes of delay between events happening and seeing them in the Logs dashboard."),(0,a.kt)("b",null,"5. Does the Logs come with alarm and monitoring?"),(0,a.kt)("p",null,"No. If you are interested in this feature, please contact us to discuss the product roadmap."),(0,a.kt)("b",null,"6. What kind of integration capability does it have? Can we connect it to other data analytic services like dataDog?"),(0,a.kt)("p",null,"No."),(0,a.kt)("b",null,"7. Can we see the response rate for each notification, channel, and template? Can we see the response rate of a specific user?"),(0,a.kt)("p",null,'Such requests fall under another feature requests titled "Insights".'),(0,a.kt)("b",null,"8. What is the data retention of the logs?"),(0,a.kt)("p",null,"7 days."))}p.isMDXComponent=!0}}]);