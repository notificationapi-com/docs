"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[131],{5680:(e,i,n)=>{n.d(i,{xA:()=>p,yg:()=>f});var t=n(6540);function a(e,i,n){return i in e?Object.defineProperty(e,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[i]=n,e}function o(e,i){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);i&&(t=t.filter((function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable}))),n.push.apply(n,t)}return n}function r(e){for(var i=1;i<arguments.length;i++){var n=null!=arguments[i]?arguments[i]:{};i%2?o(Object(n),!0).forEach((function(i){a(e,i,n[i])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))}))}return e}function s(e,i){if(null==e)return{};var n,t,a=function(e,i){if(null==e)return{};var n,t,a={},o=Object.keys(e);for(t=0;t<o.length;t++)n=o[t],i.indexOf(n)>=0||(a[n]=e[n]);return a}(e,i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(t=0;t<o.length;t++)n=o[t],i.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var l=t.createContext({}),c=function(e){var i=t.useContext(l),n=i;return e&&(n="function"==typeof e?e(i):r(r({},i),e)),n},p=function(e){var i=c(e.components);return t.createElement(l.Provider,{value:i},e.children)},d="mdxType",g={inlineCode:"code",wrapper:function(e){var i=e.children;return t.createElement(t.Fragment,{},i)}},u=t.forwardRef((function(e,i){var n=e.components,a=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),u=a,f=d["".concat(l,".").concat(u)]||d[u]||g[u]||o;return n?t.createElement(f,r(r({ref:i},p),{},{components:n})):t.createElement(f,r({ref:i},p))}));function f(e,i){var n=arguments,a=i&&i.mdxType;if("string"==typeof e||a){var o=n.length,r=new Array(o);r[0]=u;var s={};for(var l in i)hasOwnProperty.call(i,l)&&(s[l]=i[l]);s.originalType=e,s[d]="string"==typeof e?e:a,r[1]=s;for(var c=2;c<o;c++)r[c]=n[c];return t.createElement.apply(null,r)}return t.createElement.apply(null,n)}u.displayName="MDXCreateElement"},4934:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>r,default:()=>g,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var t=n(8168),a=(n(6540),n(5680));const o={sidebar_position:4},r="Android SDK (Front-End)",s={unversionedId:"reference/android-sdk",id:"reference/android-sdk",title:"Android SDK (Front-End)",description:"The Android SDK is used to recieve push notifications and handle device token synchronization with NotificationAPI.",source:"@site/docs/reference/android-sdk.md",sourceDirName:"reference",slug:"/reference/android-sdk",permalink:"/reference/android-sdk",draft:!1,tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"tutorialSidebar",previous:{title:"iOS SDK (Front-End)",permalink:"/reference/ios-sdk"}},l={},c=[{value:"Setup",id:"setup",level:2},{value:"Getting Started",id:"getting-started",level:2},{value:"NotificationApiService",id:"notificationapiservice",level:2},{value:"fun onPreDisplayNotification(message: RemoteMessage)",id:"fun-onpredisplaynotificationmessage-remotemessage",level:3},{value:"Parameters",id:"parameters",level:4},{value:"fun displayNotification(intent: NotificationApiIntent, icon: Int, channelId: String, channelName: String): Int",id:"fun-displaynotificationintent-notificationapiintent-icon-int-channelid-string-channelname-string-int",level:3},{value:"Parameters",id:"parameters-1",level:4},{value:"Returns",id:"returns",level:4},{value:"fun onNewToken(token: String)",id:"fun-onnewtokentoken-string",level:3},{value:"Parameters",id:"parameters-2",level:4},{value:"NotificationApiActivity",id:"notificationapiactivity",level:2},{value:"fun onNotificationClicked(message: RemoteMessage)",id:"fun-onnotificationclickedmessage-remotemessage",level:3},{value:"Parameters",id:"parameters-3",level:4},{value:"fun onNotificationRequestPermissionResult(isGranted: Boolean)",id:"fun-onnotificationrequestpermissionresultisgranted-boolean",level:3},{value:"NotificationApi",id:"notificationapi",level:2},{value:"fun configure(credentials: NotificationApiCredentials, config: NotificationApiConfig)",id:"fun-configurecredentials-notificationapicredentials-config-notificationapiconfig",level:3},{value:"Parameters",id:"parameters-4",level:4},{value:"fun askNotificationPermissions(requestCode: Int)",id:"fun-asknotificationpermissionsrequestcode-int",level:3},{value:"Parameters",id:"parameters-5",level:4},{value:"NotificationApiCredentials",id:"notificationapicredentials",level:2},{value:"constructor NotificationApiCredentials(val clientId: String, val userId: String, val hashedUserId: String?)",id:"constructor-notificationapicredentialsval-clientid-string-val-userid-string-val-hasheduserid-string",level:3},{value:"Parameters",id:"parameters-6",level:4},{value:"NotificationApiConfig",id:"notificationapiconfig",level:2},{value:"constructor NotificationApiConfig(val baseUrl: String)",id:"constructor-notificationapiconfigval-baseurl-string",level:3},{value:"Parameters",id:"parameters-7",level:4}],p={toc:c},d="wrapper";function g(e){let{components:i,...n}=e;return(0,a.yg)(d,(0,t.A)({},p,n,{components:i,mdxType:"MDXLayout"}),(0,a.yg)("h1",{id:"android-sdk-front-end"},"Android SDK (Front-End)"),(0,a.yg)("p",null,"The Android SDK is used to recieve ",(0,a.yg)("strong",{parentName:"p"},"push notifications")," and handle device token synchronization with NotificationAPI."),(0,a.yg)("p",null,"Supported environments:"),(0,a.yg)("ul",null,(0,a.yg)("li",{parentName:"ul"},"Android API 24 and above")),(0,a.yg)("h2",{id:"setup"},"Setup"),(0,a.yg)("p",null,"Add the JitPack repository in your ",(0,a.yg)("inlineCode",{parentName:"p"},"build.gradle"),"."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-gradle"},"allprojects {\n    repositories {\n        ...\n        maven { url 'https://jitpack.io' }\n    }\n}\n")),(0,a.yg)("p",null,"Then add the Android SDK dependency."),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-gradle"},"dependencies {\n    implementation 'com.github.notificationapi:notificationapi-android-sdk:1.0.0'\n}\n")),(0,a.yg)("h2",{id:"getting-started"},"Getting Started"),(0,a.yg)("p",null,"Create a new service that extends from ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApiService")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="MyService.kt"',title:'"MyService.kt"'},"class MyService: NotificationApiService() {\n\n    // Handle FCM tokens whenever they are generated\n    override fun onNewToken(token: String) {\n        super.onNewToken(token)\n    }\n\n    // Build notifications before displaying them to the user\n    override fun onPreDisplayNotification(message: RemoteMessage) {\n        val onClickIntent = NotificationApiIntent(this, MainActivity::class.java, message)\n\n        displayNotification(\n            intent = onClickIntent,\n            icon = android.R.drawable.ic_dialog_info\n        )\n    }\n}\n")),(0,a.yg)("p",null,"Add your service to ",(0,a.yg)("inlineCode",{parentName:"p"},"AndroidManifest.xml")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-xml",metastring:'title="AndroidManifext.xml"',title:'"AndroidManifext.xml"'},'<service\n    android:name=".MyService"\n    android:exported="false">\n    <intent-filter>\n        <action android:name="com.google.firebase.MESSAGING_EVENT" />\n    </intent-filter>\n</service>\n')),(0,a.yg)("p",null,"Create a new activity that extends from ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApiActivity")),(0,a.yg)("pre",null,(0,a.yg)("code",{parentName:"pre",className:"language-kotlin",metastring:'title="MainActivity.kt"',title:'"MainActivity.kt"'},'class MainActivity : NotificationApiActivity() {\n    companion object {\n        const val TAG = "Example App"\n    }\n    \n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n\n        // Configure NotificationAPI with credentials\n        NotificationApi.shared.configure(\n            NotificationApiCredentials(\n            clientId = "CLIENT_ID",\n            userId = "USER_ID"\n            )\n        )\n\n        // Request the user\'s permission to use notifications\n        NotificationApi.shared.askNotificationPermissions()\n    }\n\n    // Handle clicked notifications\n    override fun onNotificationClicked(message: RemoteMessage) {\n        super.onNotificationClicked(message)\n\n        Log.d(TAG, "Notification was clicked on")\n    }\n\n    // Handle notification permission request results\n    override fun onNotificationRequestPermissionResult(isGranted: Boolean) {\n        super.onNotificationRequestPermissionResult(isGranted)\n        Log.d(TAG, "Notifications are authorized?: $isGranted")\n    }\n}\n')),(0,a.yg)("p",null,"You must configure the SDK with your ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationAPI")," credentials. It is recommended to configure the SDK as early as possible. You must also request notification authorization from the user. "),(0,a.yg)("p",null,"You are now ready to recieve push notifications from NotificationAPI! \ud83c\udf89"),(0,a.yg)("h2",{id:"notificationapiservice"},"NotificationApiService"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApiService")," class handles device token synchronization with NotificationAPI. It is required to extend from this class in order to recieve push notifications from NotificationAPI."),(0,a.yg)("h3",{id:"fun-onpredisplaynotificationmessage-remotemessage"},"fun onPreDisplayNotification(message: RemoteMessage)"),(0,a.yg)("p",null,"This function is called after ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApiService")," has recieved a notification but before displaying the notification. You can override ",(0,a.yg)("inlineCode",{parentName:"p"},"onPreDisplayNotification()")," to customize how the notification will be displayed. To use the default notification display, you must call ",(0,a.yg)("inlineCode",{parentName:"p"},"displayNotification()")," here."),(0,a.yg)("h4",{id:"parameters"},"Parameters"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"message"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: ",(0,a.yg)("a",{parentName:"p",href:"https://firebase.google.com/docs/reference/kotlin/com/google/firebase/messaging/RemoteMessage"},"RemoteMessage")),(0,a.yg)("p",null,"The Firebase message that contains the notification."),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"NotificationAPI sends notification data through Firebase as data messages instead of notification messages. You may use ",(0,a.yg)("inlineCode",{parentName:"p"},'message.data["title"]')," and ",(0,a.yg)("inlineCode",{parentName:"p"},'message.data["body"]')," to get the notification's title and body respectively. You can read more about data and notification messages at ",(0,a.yg)("a",{parentName:"p",href:"https://firebase.google.com/docs/cloud-messaging/concept-options#notifications_and_data_messages"},"Firebase's documentation"),".")),(0,a.yg)("h3",{id:"fun-displaynotificationintent-notificationapiintent-icon-int-channelid-string-channelname-string-int"},"fun displayNotification(intent: NotificationApiIntent, icon: Int, channelId: String, channelName: String): Int"),(0,a.yg)("p",null,"This function displays a default notification to the given notification channel. This will create the notification channel if it does not exist. You should call this within ",(0,a.yg)("inlineCode",{parentName:"p"},"onPreDisplayNotification()")," to actually display the notification to the user."),(0,a.yg)("h4",{id:"parameters-1"},"Parameters"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"intent")," (required)",(0,a.yg)("br",{parentName:"p"}),"\n","Type: NotificationApiIntent"),(0,a.yg)("p",null,"An intent that contains the notification click handler as well as the remote message that will be displayed."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"icon"),"  (required)",(0,a.yg)("br",{parentName:"p"}),"\n","Type: Int"),(0,a.yg)("p",null,"The icon to display for the notification."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"channelId"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: String"),(0,a.yg)("p",null,"The channel id to use for displaying the notification. Defaults to ",(0,a.yg)("inlineCode",{parentName:"p"},'"default"'),"."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"channelName"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: String"),(0,a.yg)("p",null,"The user friendly name of the channel to display the notification in. Defaults to ",(0,a.yg)("inlineCode",{parentName:"p"},'"Notifications"')),(0,a.yg)("h4",{id:"returns"},"Returns"),(0,a.yg)("p",null,"An UUID for the displayed notification."),(0,a.yg)("h3",{id:"fun-onnewtokentoken-string"},"fun onNewToken(token: String)"),(0,a.yg)("p",null,"This function is called when FCM generates a new device token."),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"You should always call ",(0,a.yg)("inlineCode",{parentName:"p"},"super.onNewToken(token)")," to allow ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApiService")," to sync the device token to NotificationApi.")),(0,a.yg)("h4",{id:"parameters-2"},"Parameters"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"token"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: String"),(0,a.yg)("p",null,"The FCM device token."),(0,a.yg)("h2",{id:"notificationapiactivity"},"NotificationApiActivity"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApiActivity")," class initializes the ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApi")," instance and provides functionality to handle notification clicking and notification permission request results. It is recommended to extend from this class."),(0,a.yg)("h3",{id:"fun-onnotificationclickedmessage-remotemessage"},"fun onNotificationClicked(message: RemoteMessage)"),(0,a.yg)("p",null,"This function is called when a notification has been clicked on by an user."),(0,a.yg)("h4",{id:"parameters-3"},"Parameters"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"message"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: ",(0,a.yg)("a",{parentName:"p",href:"https://firebase.google.com/docs/reference/kotlin/com/google/firebase/messaging/RemoteMessage"},"RemoteMessage")),(0,a.yg)("p",null,"The notification that was clicked on."),(0,a.yg)("admonition",{type:"info"},(0,a.yg)("p",{parentName:"admonition"},"NotificationAPI sends notification data through Firebase as data messages instead of notification messages. You may use ",(0,a.yg)("inlineCode",{parentName:"p"},'message.data["title"]')," and ",(0,a.yg)("inlineCode",{parentName:"p"},'message.data["body"]')," to get the notification's title and body respectively. You can read more about data and notification messages at ",(0,a.yg)("a",{parentName:"p",href:"https://firebase.google.com/docs/cloud-messaging/concept-options#notifications_and_data_messages"},"Firebase's documentation"),".")),(0,a.yg)("h3",{id:"fun-onnotificationrequestpermissionresultisgranted-boolean"},"fun onNotificationRequestPermissionResult(isGranted: Boolean)"),(0,a.yg)("p",null,"This function is called when the user has responded to ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApi.askNotificationPermissions()"),"."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"isGranted"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: Boolean"),(0,a.yg)("p",null,"True if the user has granted permission to use notifications, else false."),(0,a.yg)("h2",{id:"notificationapi"},"NotificationApi"),(0,a.yg)("p",null,"The ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApi")," class is the interface to NotificationAPI."),(0,a.yg)("h3",{id:"fun-configurecredentials-notificationapicredentials-config-notificationapiconfig"},"fun configure(credentials: NotificationApiCredentials, config: NotificationApiConfig)"),(0,a.yg)("p",null,"Configures ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApi")," to use your credentials. This should be invoked as early as possible (such as within your activity's ",(0,a.yg)("inlineCode",{parentName:"p"},"onCreate()"),") to ensure that the user does not miss and push notifications."),(0,a.yg)("h4",{id:"parameters-4"},"Parameters"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"credentials")," (required)",(0,a.yg)("br",{parentName:"p"}),"\n","Type: NotificationApiCredentials"),(0,a.yg)("p",null,"Your NotificationAPI credentials."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"config"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: NotificationApiConfig"),(0,a.yg)("p",null,"Configuration object for ",(0,a.yg)("inlineCode",{parentName:"p"},"NotificationApi"),". Defaults to a default config."),(0,a.yg)("h3",{id:"fun-asknotificationpermissionsrequestcode-int"},"fun askNotificationPermissions(requestCode: Int)"),(0,a.yg)("p",null,"Asks the user permission to display push notifications."),(0,a.yg)("h4",{id:"parameters-5"},"Parameters"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"requestCode"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: Int"),(0,a.yg)("p",null,"The request code to track permission requests. Defaults to 0."),(0,a.yg)("h2",{id:"notificationapicredentials"},"NotificationApiCredentials"),(0,a.yg)("p",null,"A data class for NotificationApi credentials"),(0,a.yg)("h3",{id:"constructor-notificationapicredentialsval-clientid-string-val-userid-string-val-hasheduserid-string"},"constructor NotificationApiCredentials(val clientId: String, val userId: String, val hashedUserId: String?)"),(0,a.yg)("h4",{id:"parameters-6"},"Parameters"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"clientId")," (required)",(0,a.yg)("br",{parentName:"p"}),"\n","Type: String"),(0,a.yg)("p",null,"Your NotificationAPI client id."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"userId"),"  (required)\nType: String"),(0,a.yg)("p",null,"The user id."),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"hashedUserId"),(0,a.yg)("br",{parentName:"p"}),"\n","Type: String"),(0,a.yg)("p",null,"The hashed user id. Defaults to ",(0,a.yg)("inlineCode",{parentName:"p"},"null"),"."),(0,a.yg)("h2",{id:"notificationapiconfig"},"NotificationApiConfig"),(0,a.yg)("p",null,"A data class for NotificationApi credentials"),(0,a.yg)("h3",{id:"constructor-notificationapiconfigval-baseurl-string"},"constructor NotificationApiConfig(val baseUrl: String)"),(0,a.yg)("h4",{id:"parameters-7"},"Parameters"),(0,a.yg)("p",null,(0,a.yg)("inlineCode",{parentName:"p"},"baseUrl")," (required)",(0,a.yg)("br",{parentName:"p"}),"\n","Type: String"),(0,a.yg)("p",null,"The NotificationAPI API base url."))}g.isMDXComponent=!0}}]);