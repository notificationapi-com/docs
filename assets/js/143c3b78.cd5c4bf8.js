"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[544],{3866:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>c,contentTitle:()=>r,default:()=>a,frontMatter:()=>t,metadata:()=>l,toc:()=>h});var s=n(4848),o=n(8453);const t={},r="\ud83c\udf10 Setup Web Push",l={id:"guides/web-push",title:"\ud83c\udf10 Setup Web Push",description:"NotificationAPI supports sending web push notifications. While most notification channels like email or call only require using our back-end SDK, web push notification requires our front-end SDK and service worker to display them.",source:"@site/docs/guides/web-push.md",sourceDirName:"guides",slug:"/guides/web-push",permalink:"/guides/web-push",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\ud83d\udcf1 Setup Mobile Push",permalink:"/guides/mobile-push"},next:{title:"\u2709\ufe0f Email",permalink:"/channels/email"}},c={},h=[{value:"Configuring Web Push Notifications",id:"configuring-web-push-notifications",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Problem",id:"problem",level:4},{value:"Probable Causes",id:"probable-causes",level:4},{value:"Problem 1",id:"problem-1",level:5},{value:"Solution",id:"solution",level:5},{value:"Problem 2",id:"problem-2",level:5},{value:"Solution",id:"solution-1",level:5}];function d(e){const i={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",h4:"h4",h5:"h5",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h1,{id:"-setup-web-push",children:"\ud83c\udf10 Setup Web Push"}),"\n",(0,s.jsxs)(i.p,{children:["NotificationAPI supports sending web push notifications. While most notification channels like email or call only require using our ",(0,s.jsx)(i.a,{href:"../quick-start/send-a-notification",children:"back-end SDK"}),", web push notification requires our front-end SDK and service worker to display them."]}),"\n",(0,s.jsx)(i.h2,{id:"configuring-web-push-notifications",children:"Configuring Web Push Notifications"}),"\n",(0,s.jsxs)(i.p,{children:["Web push notifications are integrated with the front-end JS SDK. Please follow the setup instructions ",(0,s.jsx)(i.a,{href:"../reference/js-client#setup",children:"here"}),"."]}),"\n",(0,s.jsx)(i.admonition,{type:"warning",children:(0,s.jsxs)(i.p,{children:["The ",(0,s.jsx)(i.a,{href:"/reference/js-client#service-worker-setup",children:"Service Worker"})," is required to receive web push notifications."]})}),"\n",(0,s.jsx)(i.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(i.p,{children:"If you encounter any issues while trying to send web push notifications, here are some common problems and solutions."}),"\n",(0,s.jsx)(i.h4,{id:"problem",children:"Problem"}),"\n",(0,s.jsx)(i.p,{children:"Web push notifications do not show up and the following JSON shows up in the backend."}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-JavaScript",children:"\nNotificationAPI warning. {\n  trackingId: `${TRACKING_ID}`,\n  messages: [\n    \"WEB_PUSH delivery is activated, but the user's webPushTokens is not provided. Discarding WEB_PUSH.\",\n    'All delivery channels are disabled/discarded. Aborted.'\n  ]\n}\n\n"})}),"\n",(0,s.jsx)(i.h4,{id:"probable-causes",children:"Probable Causes"}),"\n",(0,s.jsx)(i.h5,{id:"problem-1",children:"Problem 1"}),"\n",(0,s.jsx)(i.p,{children:"The browser's notification permissions have been previously denied or blocked."}),"\n",(0,s.jsx)(i.h5,{id:"solution",children:"Solution"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsx)(i.li,{children:"Click on the bell notification icon, and it would ask the user whether they want to web push notifications."}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"notification icon",src:n(4505).A+"",width:"480",height:"270"})}),"\n",(0,s.jsxs)(i.ol,{start:"2",children:["\n",(0,s.jsxs)(i.li,{children:["Click on ",(0,s.jsx)("u",{children:"Yes"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"This would prompt the browser to ask for permission to show notifications."}),"\n",(0,s.jsx)(i.p,{children:"If the issue still persists,"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Reset the site's permissions to send notifications."}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Click on the the bell notification icon, and then click on the settings icon which is there on the top right corner."}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"notification preferences",src:n(2163).A+"",width:"678",height:"270"})}),"\n",(0,s.jsxs)(i.ol,{start:"3",children:["\n",(0,s.jsxs)(i.li,{children:["Click on ",(0,s.jsx)("u",{children:"Click here"}),"."]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:"This would prompt the browser to ask for permission to show notification."}),"\n",(0,s.jsx)(i.h5,{id:"problem-2",children:"Problem 2"}),"\n",(0,s.jsx)(i.p,{children:"The Service Worker hasn't been initialized properly."}),"\n",(0,s.jsx)(i.h5,{id:"solution-1",children:"Solution"}),"\n",(0,s.jsxs)(i.ol,{children:["\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsxs)(i.p,{children:["Follow the ",(0,s.jsx)(i.a,{href:"/reference/js-client#service-worker-setup",children:"Steps"})," over here."]}),"\n"]}),"\n",(0,s.jsxs)(i.li,{children:["\n",(0,s.jsx)(i.p,{children:"Open the built-in developer tools for the site, then go to Applications >> Service workers. If the service worker has been initialized, it would look something like this:"}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.p,{children:(0,s.jsx)(i.img,{alt:"dev tools",src:n(6552).A+"",width:"678",height:"553"})}),"\n",(0,s.jsxs)(i.ol,{start:"3",children:["\n",(0,s.jsxs)(i.li,{children:["If ",(0,s.jsx)("u",{children:"notificationapi-service-worker.js"})," (Service Worker) doesn't show up, that means the service worker is not there inside the public folder. Please make sure that it is placed inside the public folder."]}),"\n"]})]})}function a(e={}){const{wrapper:i}={...(0,o.R)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},2163:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/image-1-ee9826e5499d18b37fbef5213545f606.png"},6552:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/image-2-f139cee2f1e4ce98d6c9bd2da7c4b83a.png"},4505:(e,i,n)=>{n.d(i,{A:()=>s});const s=n.p+"assets/images/image-f61a03c10fb75cad935111927579d0cb.png"},8453:(e,i,n)=>{n.d(i,{R:()=>r,x:()=>l});var s=n(6540);const o={},t=s.createContext(o);function r(e){const i=s.useContext(t);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function l(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),s.createElement(t.Provider,{value:i},e.children)}}}]);